#  DO NOT CHANGE THIS FILE
#  If you need to change this file, you are doing something wrong.
#
#  [!] THIS FILE IS MANAGED BY PUPPET [!]
#
Options FollowSymlinks Multiviews

RedirectMatch 404 /\.

RewriteEngine on
RewriteBase /
#Block access to hidden files/dirs
RewriteRule ^\..*$ - [F,L]
#Don't favicon!
RewriteCond %{REQUEST_FILENAME} !^favicon\.ico
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !\.(js|ico|txt|gif|jpg|png|css|php)
RewriteCond %{REQUEST_URI} !^api/
RewriteCond %{REQUEST_URI} !^rrd/
RewriteCond %{REQUEST_URI} !=/server-status
RewriteCond %{REQUEST_URI} ^Shibboleth

<% scope['observium::custom_rewrite_conditions'].each do | condition | -%>
RewriteCond <%= condition['rewrite_cond'] %> <%= condition['rewrite_rule'] %>
<% end -%>

RewriteRule ^(.*)$ index.php/$1/

AcceptPathInfo On
